---
title: API Reference

language_tabs: # must be one of https://git.io/vQNgJ
  - Https

toc_footers:
  - <a href='#'>Sign Up for a Developer Key</a>
  - <a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true

code_clipboard: true
---

<!-- https://github.com/slatedocs/slate/wiki/Markdown-Syntax -->
# Aura Air Rest Api
The Aura API enables you to manage your organization in Aura and to manage all your devices and your locations from your own app by integrating to it this API

The Aura API is organized around REST and uses HTTP verbs and response codes that most clients are familiar with. All requests must be formatted as Content-Type: application/JSON (except where noted). All responses are also formatted JSON, encoded in the UTF-8 character encoding (Content-Type: application/JSON; charset=utf-8). 

## Security
Aura API uses the API key security , Each key is generated by ourselves , so contact us if you want to use the API today , Each key given will  be a refference to a specific owner of an organization and will give access to all the endpoints and the functionalities of the B2B Api for your organization .  
The API key should be passed in the Headers of each Request this way :

 *Authorization: Bearer API_KEY*

Base URL : aura-b2b-rest.web.app

## API Update Guidelines
Our API is constantly being updated with new features and improvements to existing ones. These updates ensure the API evolves with customer and industry demands. Managing this change to ensure we provide a reliable, consistent, and backward compatible API design is a critical challenge for our team. Every new and improved feature is put through a peer-review process to ensure:

it will not change an existing resource to the extent that it breaks current customer implementations,
that it is consistent with existing resources (therefore predictable and easy to use).
## Developer Keys
Please contact our customer service team to sign up for a developer key and begin using our API today.

# Locations
## Add a Location
  
> ### Body  


```json
  {
  "address" : "Sderot Rothschild 45",
  "city" : "Tel AViv",
  "name" : "Home",
  "state" : "Israel",
  "zipcode" : "86521"
}

```

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
  {
    "status": "sucess",
    "message": "Created a new location",
    "newId": "-hrkiyEWBMqnreiZMHO"
} 
```  

To create a location you will need the following keys:  


key | value 
----|------
adress |(string)
city |(string)
name |(string)
state |(string)
zipcode |(string)  



* needs an APi keys  
* two locations can't have the same name  
* two locations can't be the same even with different name  


### HTTP Request
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/locations
`

parameter | value
----------|------
orgId | your organization Id  


## Get All Locations  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "-Lp2LeDOb8SdpqYU1Wpw12": {
            "_id": "-Lp2LeDOb8SdpqYU1Wpw12",
            "address": "Hamiphras 6",
            "altitude": 0,
            "aura_daily_report": "true",
            "bad_aqi_event": false,
            "city": "Yavne",
            "components": {
                "administrative_area": "Merkaz",
                "country_iso_3": "ISR",
                "locality": "Yavne",
                "postal_code": "81000",
                "postal_code_short": "81000",
                "premise": "6",
                "premise_number": "6",
                "sub_administrative_area": "Rehovot",
                "thoroughfare": "Hamifras",
                "thoroughfare_name": "Hamiphras"
            },
            "created_at": 1577098253453,
            "last_modified": 1577098253453,
            "latitude": 31.86777,
            "longitude": 34.733457,
            "name": "Building 2",
            "state": "Israel",
            "zipcode": "8101306"
        },
        "-M7qh60FjNWsDVfEuD6Z": {
            "_id": "-M7qh60FjNWsDVfEuD6Z",
            "address": "Saknai 4",
            "aura_daily_report": true,
            "city": "hod hasharon",
            "components": {
                "ISO_3166-1_alpha-2": "US",
                "ISO_3166-1_alpha-3": "USA",
                "_category": "place",
                "_type": "village",
                "continent": "North America",
                "country": "United States of America",
                "country_code": "us",
                "country_iso_3": "USA",
                "county": "Maricopa County",
                "hamlet": "Kaka",
                "state": "Arizona",
                "state_code": "AZ"
            },
            "created_at": 1590055694668,
            "is_shared": false,
            "last_modified": "2020-07-09T09:00:13.914Z",
            "latitude": 32.1420858,
            "longitude": 34.8918504,
            "name": "Aura Office",
            "state": "israel",
            "zipcode": "453535"
        }
    }
}
```  


Retrieve all locations under organization  
the data is an object and each key/vallue is a locations 
if you want more informations on the location object go to the *Get a single location by ID* endpoint
 

* Needs an API key 


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/locations
`

parameter | value
----------|------
orgId | your organization Id  


## Get a Specific Location

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "_id": "-Lp2LeDOb8SdpqYU1Wpw12",
        "address": "Hamiphras 6",
        "altitude": 0,
        "aura_daily_report": "true",
        "bad_aqi_event": false,
        "city": "Yavne",
        "components": {
            "administrative_area": "Merkaz",
            "country_iso_3": "ISR",
            "locality": "Yavne",
            "postal_code": "81000",
            "postal_code_short": "81000",
            "premise": "6",
            "premise_number": "6",
            "sub_administrative_area": "Rehovot",
            "thoroughfare": "Hamifras",
            "thoroughfare_name": "Hamiphras"
        },
        "created_at": 1577098253453,
        "last_modified": 1577098253453,
        "latitude": 31.86777,
        "longitude": 34.733457,
        "name": "Building 2",
        "state": "Israel",
        "zipcode": "8101306"
    }
}
```  
get a specific location under organization  
minimum data obtained :  

key | value
----|------
_id |(unique string)
adress|(string)
city |(string)
created_at |(ISO date string)
last_modified |(ISO date string)
lattitude and longitude |(float numbers)
name |(unique string among locations)
state |(string)
zipcode |(string)
components|(object more informations on the location)  
  

* Needs an API key  

### HTTP REQUEST

`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/locations/{{locationId}}
`

parameter | value
----------|------
orgId | your organization Id
locationId | The location Id you want to get  



## Update a Specific Location
  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
  {   
    "state":"Israel",
    "zipcode":"86953",
    "city":"Tel Aviv",
    "address":"4 Sderot Rothschild"
}
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "state": "Israel",
        "zipcode": "86953",
        "city": "Tel Aviv",
        "address": "4 Sderot Rothschild"
    }
}
```  

Update a specific key of a specific location under organization:  
If you want to update the adress , you will have also to pass the city , the state and the zipcode  
Meaning you can pass 3 differents objects with the following keys :  

* First Object :  

    key | value
    ----|------
    adress |(string)
    city |(string)
    name |(unique string among locations)
    zipcode |(string)
    state |(string)  

* Second Object :  

    key | value
    ----|------
    adress |(string)
    city |(string)
    zipcode |(string)
    state |(string)  

* Third Object :  

      key | value
      ----|------
      name| (unique string among locations)  


Note that two locations can not have the same name and cannot be the same  
  

* needs an API key  


### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/locations/{{locationId}}
`

parameter | value
----------|------
orgId | your organization Id
locationId | the location Id you want to update  


## Delete a Specific Location  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "message": "location deleted",
    "locationId": "-Lp2LeDOb8SdpqYU1Wpw12"
}
```  

Delete a location by his Id  
The Organization must be the owner of the location   

<aside class="warning"> Deleting a location will also delete all the groups and floors that had this locationId , all the devices will became floating with null value for floorId , groupId , locationId and all the rules will still exist but they will no longer be linked to any group , so to any devices , finally all the customers that had a role under this location will lost it and the location object under the customer will be updated by deleting the specific location </aside>
  

* Needs an API key  

### HTTP REQUEST  
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/locations/{{locationId}}
`

parameter | value
----------|------
orgId | your organization Id
locationId | the location Id you want to Delete  


# Floors  

## Add a Floor


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Body  

```json
{
    "name":"floor 1",
    "locationId":"-awmagoeQTSlyvdcvrrEQPIQHFT",
    "reminderDay":1
}
```
> ### Response  

```json
{
    "status": "success",
    "message": "Created a new Floor",
    "locationId": "-ntdrloKTWKHifxfpXPJFKEDB"
}
```  

Give the ability to create a floor  
data needed :  

key | value
----|------ 
name |(must be unique aong the floors)
locationId |(must exists under your organization)
reminderDay |(a number representing the day of the month when you want a reminder to clean the prefilter it must be 1,5,10 or 15)  

  
  
  
Note that you can't create two same floors under the same organizaition  
Two floors can not have the same name
<aside class="warning"> You will not be able to change the location of the floor later so becareful  </aside>
  

* Needs an API key  

### HTTP REQUEST

`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/floors
`
parameter | value
----------|------
orgId | your organization Id  

  
## Get All Floors  


> ### Headers 

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "data": {
        "-M8tVY8qZaSrXtrUzG80": {
            "_id": "-M8tVY8qZaSrXtrUzG80",
            "created_at": "2020-06-03T09:27:55.319Z",
            "last_modified": "2020-06-03T09:27:55.319Z",
            "locationId": "null",
            "name": "floor ne",
            "reminderDay": "1"
        },
        "-MAQ4XeE2mdDkDmq2bva": {
            "_id": "-MAQ4XeE2mdDkDmq2bva",
            "created_at": "2020-06-22T08:12:42.549Z",
            "last_modified": "2020-06-22T08:12:42.549Z",
            "locationId": "null",
            "name": "floor 2",
            "reminderDay": "1"
        }
    }
}
```  

Retrieve all floors under organization  
If you want more details n the floor object go to the *Get a single floor by ID* endpoint
  

* Needs an API key  

### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/floors
`  

parameter | value
----------|------
orgId | your organization Id  

  
## Get a Specific Floor  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "data": {
        "_id": "-M8tVY8qZaSrXtrUzG80",
        "created_at": "2020-06-03T09:27:55.319Z",
        "last_modified": "2020-06-03T09:27:55.319Z",
        "locationId": "null",
        "name": "floor ne",
        "reminderDay": "1"
    }
}
```  

Get a floor by his Id  
The received object will have the folowing keys :  

key | value
----|------
_id | string , the id of the floor 
created_at | ISO string date , date of creation of the floor
last_modified | ISO string date , last update of the floor
locationId | unique string , the location of the floor
name |  string , unique among floor under the sane location
reminderDay | integer , day of the month to clean the pre_filter of the devices , can be 1 , 5 , 10 or 15  

  

* needs an API key  

### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/floors/{{floorId}}
`  


parameter | value
----------|------
orgId | your organization Id
floorId | the floor Id you want to update  

  
## Update a Specific Floor  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
    "name":"floor 9"
}
```
> ### Response  

```json
{
    "status": "success",
    "data": {
        "name": "floor 9"
    }
}
```  

Update keys of a floor under a specific organization:  
The keys you can update are :  

key | value
----|------
name |(must be unique among the floors)
reminderDay |(a number representing the day of the month when you want a reminder to clean the prefilter it must be 1,5,10 or 15)  


Note that two floors can not have the same name
  

* Needs an API key  

### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/floors/{{floorId}}
`  


parameter | value
----------|------
orgId | your organization Id
floorId | the floor Id you want to update  
  
  
## Delete a Specific Floor 


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "message": "floor has been deleted",
    "floorId": "-M8tVY8qZaSrXtrUzG80"
}
```  

Delete an existing floor from your organization  
Note that all the devices that had this floor will have now a key floorId with a **null** value
  

* Needs an APi key  

### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/floors/{{floorId}}
`  


parameter | value
----------|------
orgId | your organization Id
floorId | the floor Id you want to delete  

  
# Groups
## Add a Group  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
    "locationId":"-awmagoeQTSlyvdcvrrEQPIQHFT",
    "name": "test322"
}
```  

> ### Response  

```json
{
    "status": "success",
    "message": "Created a new Group",
    "data": {
        "groupId": "-levreaJYHSAKvntwbnuGCLROV",
        "name": "test322",
        "locationId": "-awmagoeQTSlyvdcvrrEQPIQHFT"
    }
}
```  


Give the ability to create a new group  
Data needed :   

key | value
----|------
locationId |(string relative to an existing location in your organization)
name |(unique string among the groups)  


Note that the locationId used must be under your organization  
two groups can not have the same name
<aside class="warning"> You will not be able to update the locationId of a group later so becareful  </aside>
  

* Needs an API key  

### HTTP REQUEST  

`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups
`  


parameter | value
----------|------
orgId | your organization Id  


## Get All Groups  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```  


> ### Response  

```json
{
    "status": "success",
    "data": {
        "-M8tcHwxWOGJtVAZI14G": {
            "_id": "-M8tcHwxWOGJtVAZI14G",
            "created_at": "2020-06-03T10:01:46.121Z",
            "last_modified": "2020-06-03T10:01:46.121Z",
            "locationId": "-Lp2LeDOb8SdpqYU1Wpw13",
            "name": "ee"
        },
        "-M8tcM-nKe7HmX9tcuch": {
            "_id": "-M8tcM-nKe7HmX9tcuch",
            "created_at": "2020-06-03T10:02:02.752Z",
            "last_modified": "2020-06-03T10:02:02.752Z",
            "locationId": "null",
            "name": "build2"
        },
        "-M8tcVdtAlnqpHljBiVq": {
            "_id": "-M8tcVdtAlnqpHljBiVq",
            "created_at": "2020-06-03T10:02:42.246Z",
            "last_modified": "2020-06-03T10:02:51.571Z",
            "locationId": "-Lp2LeDOb8SdpqYU1Wpw12",
            "name": "build123"
        }   
      }
}
```  

Retrieve a list of all groups under your organization  
Go to the *get a single group by ID* endpoint to get more informations on the structure of the group object

  

* Needs an API key  

### HTTP REQUEST  

`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups
`

parameter | value
----------|------
orgId | your organization Id  


## Get a Specific Group  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "data": {
        "_id": "-M8tcHwxWOGJtVAZI14G",
        "created_at": "2020-06-03T10:01:46.121Z",
        "last_modified": "2020-06-03T10:01:46.121Z",
        "locationId": "-Lp2LeDOb8SdpqYU1Wpw13",
        "name": "ee"
    }
}
```  

Get a single group by his Id under tour organization  
Data obtained :  

key | value
----|------
_id |(a unique string)
created_at |(ISO string date)
last_modified |(ISO string date)
locationId |(string , unique , related to a specific location of your organization)
name |(unique string among your groups)  


Note that the group must be under your organization (created by it) if you want to access it
  

* Needs an API key  

### HTTP REQUEST  

`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups/{{groupId}}
`  


parameter | value
----------|------
orgId | your organization Id
groupId | the group Id you want to get  


## Update a Specific Group  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
    "name":"best group in the world"
}
```
> ### Response  

```json
{
    "status": "succes",
    "message": "group updated",
    "data": {
        "groupId": "-M8tcHwxWOGJtVAZI14G",
        "group": {
            "name": "the best name",
            "last_modified": "2020-08-25T08:40:19.688Z"
        }
    }
}
```  

Update keys of a single group  
Key to update:  

key | value
----|------
name |(unique string among groups)  

  

* Needs an API key  

### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups/{{groupId}}
`  


parameter | value
----------|------
orgId | your organization Id
groupId | the groupId you want to update  


## Remove the rule link to a group  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "messsage": "the group is now link to any rule",
    "data": {
        "groupId": "-rzrkxvyehZSKXZBFtqmcgmspHIDHQK"
    }
}
```  


Give the ability to remove the link between the group and his rule without knowing the rule Id  
Note that all the devices that had this group will now  have a value **null** to the key ruleId  

  

* Needs an API key  

### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups/{{groupId}}/rules
`  


parameter | value
----------|------
orgId | your organization Id
groupId | the group Id you want to remove the rule  



## Delete a Specific Group  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "message": "group deleted",
    "data": {
        "groupId": "ooxyyZz2"
    }
}
```  


Give the ability to delete a group by his Id  
Note that all the devices that had this group will now  have a value **null** to the key grouId  

<aside class="warning"> If a rule was linked to this group all the devices that were linked to this group will now have the value null for ruleId  </aside>

  

* Needs an API key  

### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/groups/{{groupId}}
`  


parameter | value
----------|------
orgId | your organization Id
groupId | the group Id you want to delete  


# Devices

## Get All Devices


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```


> ### Response  

```json
{
    "status": "success",
    "data": {
        "1f002e000a47363433353735": {
            "_id": "1f002e000a47363433353735",
            "created_at": "2020-05-14T09:22:58.431Z",
            "filter_due_date": "2020-10-14T09:22:58.431Z",
            "floorId": "-M8op_BSEnPr4ccQoITD",
            "groupId": "-M8tcVdtAlnqpHljBiVq",
            "last_modified": "2020-06-07T12:29:54.303Z",
            "locationId": "-Lp2LeDOb8SdpqYU1Wpw12",
            "room": "Living Room"
        },
        "25002e001147383531363134": {
            "_id": "25002e001147383531363134",
            "created_at": "2020-05-14T09:22:58.431Z",
            "filter_due_date": "2020-10-14T09:22:58.431Z",
            "floorId": "-M8opVbcMkKAXZGCJt2l",
            "groupId": "ooxyyZz1",
            "last_modified": "2020-06-04T10:42:53.289Z",
            "locationId": "-Lp2LeDOb8SdpqYU1Wpw",
            "room": "Conference Room roei"
        }
    }
}
```  

Retrieve a list of devices object under your organization  
If you want more details on the device object go to the *get  a single devide by ID* endpoints  

  

* Needs an API  key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/devices
`  


parameter | value
----------|------
orgId | your organization Id  


## Get a Specific Device  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "_id": "3b002c001047383531363134",
        "created_at": "2020-05-14T09:22:58.431Z",
        "filter_due_date": "2020-10-14T09:22:58.431Z",
        "floorId": "-M8op_BSEnPr4ccQoITD",
        "groupId": "-M8tcVdtAlnqpHljBiVq",
        "last_modified": "2020-06-07T12:29:54.303Z",
        "locationId": "-Lp2LeDOb8SdpqYU1Wpw12",
        "room": "Children Room"
    }
}
```  


Get a single device by it ID  
Data obtained :  

key|value
---|----- 
 _id| (unique string)
created_at |(ISO string)
filter_due_date| (ISO string , a date HTTP REQUESTed to the moment you will have to replace the filter)
floorId| (The string id of an existing floor of your organization)
groupId| (The string id of an existing group of your organization)
last_modified |(ISO string)
locationId |(The string id of an existing location of your organization)
room |(similar to a name , except it is not unique)
ruleId | optional , string , the rule that is link to the group of the device  

  

* Needs an API key  

### HTTP REQUEST  

`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/devices/{{deviceId}}
`

parameter | value
----------|------
orgId | your organization Id
deviceId | the device id you want to get  


## Update a Specific Device  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
    "room": "Living Room"
}
```
> ### Response  

```json
{
    "status": "success",
    "message": "device updated",
    "data": {
        "deviceId": "3b002c001047383531363134",
        "info": {
            "status": true,
            "message": "Data updated succesfully!"
        }
    }
}
```  


Update keys of a device :  
Here is a list of the keys you can update :  

key | value
----|------  
floorId |(unique string of a floor that must be under your organization)
groupId |(unique string of a group that must be under your organization)
locationId |(unique string of a location that must be under your organization)
room |(a string same as a namen , except two device can have tha same room under your organization)  


Note that :  

* The floorId and the groupId must always be under the same location than the device unless floorId and groupId are null  
* In such case , if you want to update the locationId of a device you will need to update also the floorId and the groupid of thedevice unless they are already null  
* You can update the floorId and the groupId to null   
* If you update a locationId to null , you will not be able to update the floorId or the groupId , but only the room at the same time  
* When you put a locationId to null , the groupId, the floorId and the ruleId (if the device have one) will be set to null  
* When you update the groupId of a device , the ruleId of this one will also change according to the rule link to the new group , ifthe new group is not link to any rule the ruleId value of the device will become **null**  
* If you delete the location link to this device  , the groupId , floorId , ruleId and locationId will also be set to null    

  

* Needs an API key  


### HTTP REQUEST  
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/devices/{{deviceId}}
`   


parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to update  


## Get Sensor Data of a specific Device
  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "succes",
    "data": {
        "aqi": {
            "value": 0
        },
        "pm10": {
            "value": 8,
            "units": "µg/m3"
        },
        "pm25": {
            "value": 0,
            "units": "µg/m3"
        },
        "co": {
            "value": 0.8,
            "units": "ppm"
        },
        "humidity": {
            "value": 45.8,
            "units": "%"
        },
        "temperature": {
            "value": 26,
            "units": "C"
        },
        "co2": {
            "value": 417,
            "units": "ppm"
        },
        "voc": {
            "value": 38,
            "units": "ppb"
        }
    }
}
```  

Get the device sensor data at the actual moment by it id  
Here is a list of sensor :  

sensor | unit
-------|-----
AQI |(Air QUality index a value between 0 and 500  , better when it's less)
pm10 |( big particles ug/m3)
pm25 |(bigger particle ug/m3)
co |(carbon monoxyde ppm)
humidity |(in percentage)
temperature |(in °C)
co2 |(in ppm)
voc |(organic component in ppb)  


You can pass a list of sensor (separated by a coma) in the query *sensor* to get only specific sensors  
If you don't pass any query the server will sent you all the sensor informations
  

* Needs an API key  

### HTTP REQUEST
`
GET
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/sensors
`  

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the sensor  

  

query | value  
------|------
sensor (optional)| list of sensors you want to get the value off  


## Set Device Mode  
  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json 
{
    "activate" : "on" ,
    "startTime":"8:00",
    "endTime":"15:00"
}
```

> ### Response  

```json
{
    "status": "success",
    "message": "The mode was updated",
    "data": {
        "mode": "booster",
        "deviceId": "25002e001147383531363134"
    }
}
```  


Set device mode (call firmware setSystemMode):  
The mode passed as a parameter can be  

* high
* low
* auto
* night

Auto mode will just stop the high mode and the low mode  
About the night mode , you will have to provide informations in the body about the start time and the end time as well as information about activation   
Your body should in such case have these keys :  

key | value 
----|------
startTime | time hh:mm
endTime | time hh:mm  
activation | if the night mode have to be deactive , off , or activate , on


The hours should be between 0 and 24 and the minutes should be between 0 and 59  

Note that :  

* the time of activity of the night mode is calculated by slice of half an hour you have know that the time difference between the start time and the end time have to be between 1 and 12 hours and can only be slice of 30 minutes
* The mode that you activate will override the old one , unless it is the night  mode
* The night mode is a special mode he can be activated only for a specific time 
* If you activate the night mode for a futur period of time , it will start automaticaly at this time
, you can also deactivate it whenever you want by passing off to the activate key in the body
* If you try to set the mode of the device while she is in night mode , the mode will be saved but will not start until the end of the night mode (or until his deactivation)

* Needs an API key   


### HTTP REQUEST
`
POST
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/mode/{{mode}}
`

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the sensor
mode | the mode you want to set the device in (can be booster or normal)  

## Get Device Mode  
  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "data": {
        "actualMode": "night",
        "nextMode" : "high"
    }
}

```  
Give you the ability to get the current mode   
There is 4 different modes :   

 * high
 * low
 * auto
 * night  


Check *set device mode* endpoint to get more information about the modes  

The answer will be in the **data** key and will contain one or two keys :  

key | value 
----|------
actualMode | the actual mode of the device
nextMode | Only if actualMode value is **night** , the value will be the mode that will run after the night mode will be over   
  


 * Needs an Api Key

### HTTP REQUEST
`
GET
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/mode
`  

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the mode  


## Set Device Timezone  
  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Configured successfully",
    "message": "Time zone has been set to - (-2)",
    "data": {
        "device": "3b002c001047383531363134",
        "timezone": -2
    }
}
```  

Set device timezone (call firmware setTimeZone)  
The **timezone** prameter must be a integer number between -12 and 12
  

* Needs an API key  

### HTTP REQUEST
`
POST
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/timezone/{{timezone}}
`

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the sensor
timezone | the mode you want to set the timezone in (can be an integer between -12 and 12)  


## Get the EEPROM of a single device  
  

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
  "night-mode":{
    "is-defined":true
    "req-new-timer-def":true
    "start-time":"16:27"
    "timer-length":11
    "tmp-timer-length":4.033333302
  }
  "active-mode":{
    "current":3
    "next":1
  }
  "panic-reset":{
    "panic-counter":1
    "last-panic-event":1606224033
  }
  "user-reset":{
    "reset-counter":1
    "last-reset-event":1606215867
  }
  "led-switch":{
    "state":true
  }
  "timezone":2
}
```  


Give the ability to get the **EEPROM** of a specific device by id  

The EEPROM is a place were can be stored small amounts of data that will persist even after the device resets or if the device is powered off.

here is a structure of the EEPROM :  

 * **night-mode** :  
   * **is-defined** : boolean , is the night mode is defined (defined with start time and end time but maybe not active now)
   * **req-new-timer-def** : system flag
   * **start-time** : The start time of the night mode
   * **timer-length** : How much time the night mode last (counted in half odf hours) 
   * **tmp-timer-length** : the number of hours remaining in the night mode
 * **active-mode** : 

    * **current** : the current active mode , 0 is auto , 1 is high , 2 is low and 3 is night
    * **next** : the next mode if night is active else it will be -1
 * **panic-reset** :  
    * **panic-counter** : counter of panic event that happened 
    * **last-panic-event** : timestamp of the last panic event

 * **user-reset** :  
    * **reset-counter** : counter of reset event that happened 
    * **last-reset-event** : timestamp of the last reset event

 * **led-switch** :  
  * **state** : the actual state of the led , true if on , false if off

* **timezone** : The timezone of the device  
  
    
And this endpoint   

* Needs an API key  



### HTTP REQUEST
`
GET
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/EEPROMContent
`  

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the EEPROM  


## Get the ssid of a specific device


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Configured successfully",
    "message": {
        "cmd": "VarReturn",
        "name": "SSID",
        "result": "Highroad",
        "coreInfo": {
            "name": "NS20220077",
            "last_heard": "2020-09-15T09:39:24.086Z",
            "connected": true,
            "last_handshake_at": "2020-09-14T15:09:55.470Z",
            "deviceID": "25002e001147383531363134",
            "product_id": 9494
        }
    },
    "device": "25002e001147383531363134"
}
```  


Give the ability to access the **ssid** of a specific device  
Meaning releavant informations on the wifi setting of the device
  

* Needs an API key  



### HTTP REQUEST
`
GET
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/ssid
` 

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to get the ssid  


## Set Led indication on a specific device


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Configured successfully",
    "message": "Led is now  - (on)",
    "data": {
        "device": "25002e001147383531363134"
    }
}
```  


Give the ability to turn on or off the led of a specific device  
In the url you have to pass the parameter **on** or **off**
  
  
* Needs an API Key  


### HTTP REQUEST
`
POST
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/switchLed/{{state}}
`  


parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to change the led state
state | the new state of the led (on or off)  


## Set device ssid


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```
> ### Body  

```json
{
    "ssid_name":"Highroad",
    "ssid_password":"*******"
}
```
> ### Response  

```json
{
    "status": "Configured successfully",
    "device": "25002e001147383531363134"
}
```  


Give you the ability to change the wi-fi of the device  
In the body two keys are needed :  

key| value
---|------
ssid_name | a string that is the name of the wi-fi
ssid_password | the password of the wi-fi   

  
* Needs an APi key

    
### HTTP REQUEST
`
PUT
https://{{base_url}}/api/v1/org/{{orgId}}/devices/{{deviceId}}/setCredentials
` 

parameter | value
----------|------
orgId | your organization Id
deviceId | the device Id you want to change the ssid  


# Rules
## Add a Rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
  "floorId": "-M8tVY8qZaSrXtrUzG80",
  "groupId": "ooxyyZz2",
  "locationId": "-matsmeLXKLTepktvtbKBC",
  "margins": {
    "co": {
      "active": true,
      "max": 200,
      "min": 20
    },
    "co2": {
      "active": true,
      "max": 1000,
      "min": 10
    },
    "humidity": {
      "active": true,
      "max": 30,
      "min": 25
    },
    "pm10": {
      "active": true,
      "max": 1000,
      "min": 900
    },
    "pm25": {
      "active": true,
      "max": 1000,
      "min": 200
    },
    "temperature": {
      "active": true,
      "max": 50,
      "min": 20
    },
    "voc": {
      "active": true,
      "max": 120,
      "min": 100
    }
  },
  "name": "The name"
}
```
> ### Response  

```json
{
    "status": "succes",
    "message": "Created a new Rule",
    "data": {
        "newId": "-ktqufHOTPCbyxyuXWCMPDB"
    }
}
```  


Give the ability to create a new rule  
Data to provide:  

key | value
----|------
groupId |(unique string must be in your organization)
name |(must be unique among the rules)
margins |(must follow the same rule as said in the *update a single rule* endpoint endpoints and must contain at least active , min and max for one sensor)  

For more informations about the margins key go to *update a single rule* endpoint

<aside class="warning"> If there are devices link to the group you created the rule for , all the devices will take the new rule id as the value of the key *ruleId* </aside>


<aside class="warning"> You can not link two rules to the same group , if the groupId that you use is already linked to a rule you will receive an error message. You can use the *delete group's rule* endpoint as a solution </aside>

If you want to link or unlink a rule from a webhook use instaead the enpoint  *link or unlink a weebhook to rule* 

  

* Need an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules
`  


parameter | value
----------|------
orgId | your organization Id  


## Get All Rules


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": [
        "-MDAhdwKNzOyGQOq5wN1",
        "-eezxujDOZKJOQbacneBOBZQI",
        "-ughkJFSBOZJapniyYREERQ",
        "-lfibykKOULLGAweuinpwdSRYWUFAJ",
        "-fiyuaFFUWJRmgvhtleVKZ",
        "-mkqfLFJILRHiyyzMVKMEAB"
    ]
}
```  
 

Get a list of all the ids of the rules of the organization  
To get more informations on one rule use *Get a single rule by ID* endpoints
  

* Needs an API key  

### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules
`

parameter | value
----------|------
orgId | your organization Id  
 

## Get a Specific Rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
  "_id" : "-MDn_EnJIQhseLKWablp",
  "created_at" : "2020-08-03T09:09:13.510Z",
  "groupId" : "-M8tcM-nKe7HmX9tcuch",
  "last_modified" : "2020-08-12T12:22:05.440Z",
  "margins" : {
    "co" : {
      "active" : true,
      "max" : 200,
      "min" : 20
    },
    "co2" : {
      "active" : true,
      "max" : 1000,
      "min" : 10
    },
    "humidity" : {
      "active" : true,
      "max" : 70,
      "min" : 30
    },
    "pm10" : {
      "active" : true,
      "max" : 1000,
      "min" : 200
    },
    "pm25" : {
      "active" : true,
      "max" : 1000,
      "min" : 200
    },
    "temperature" : {
      "active" : true,
      "max" : 26,
      "min" : 15
    },
    "voc" : {
      "active" : false,
    }
  },
  "name" : "LEED",
  "organizationId" : "keC9HTwXplOvCc9M1RS82lxX3ax2"
}

```  


Get a specific rule by id :  
data obtained :  

key | value
----|------
_id |(unique string)
groupId |(unique string  , reference to  an existing group of the company)
margins |(object Go to *update  a single rule* endpoints for more details)
name |(unique string among the rules)
organizationId |(string)  

  

* Needs an API key  

### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}
`

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to get  


## Update a Specific Rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
 "margins":{
     "co2":{
         "active":true ,
          "max":50 ,
           "min":30
           }
        }
    }
```
> ### Response  

```json
{
    "status": "success",
    "message": "rule updated sucessfully",
    "ruleId": "-ughkJFSBOZJapniyYREERQ"
}
```  


Update a specific rule by id  
Here is a list of the differents keys that you can update :  

key  | value
-----|------  
groupId |(unique string, identify a specific group of your organization)
name |(unique string among rules)
margins |(object)  

About the margins :    
Each key in the margin object must be a valid sensor name , here is the list :  

sensor | unit
-------|-----
co |ppm
co2 |ppm
humidity |%
pm10 |ug/m3
pm25 |ug/m3
temperature |°C
voc |ppb
aqi  |between 0 and 500 less is better  

  
  
Each sensor in the margins object should have the folowing keys :  

key | value
 ----|------
min |(number minimum value)
max |(number maximum value)
active |(boolenan , do the rule will trigger on this sensor)  

  
  
Note that you need at least one sensor in the margin object  
If you don't put a sensor , he will appear in the database with only the key active false inside it  
You are able also to create a sesnor with only a key active false  


Note that :  

* The groupId must be valid
* two rules can't have the same name
* updating the margins will just update the sensors you specify , for updating (rewrite) all the margins use the endpoints post margins instead
* If you update the groupId becareful that the group is not already link to another rule , unless it will not works
* Changing the groupId will change the key ruleId inside the device link to the new group , it will take the id of the rule 
* you need an API key  

### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}
`

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to update  


## Update a specific sensor of a specific rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{
    "active":true,
    "max":90,
    "min":15
}
```
> ### Response  

```json
{
    "status": "success",
    "message": "rule's margins updated",
    "data": {
        "margins": {
            "active": true,
            "max": 90,
            "min": 15
        }
    }
}
```  


Give the ability to update a specific sensor from a specific rule:  
Pass a s a parameter the sensor name , that must be one of the list of the *update a single rule* endpoint 
In the body the server is waitinf for 3 keys :  

key | value
----|------
active |(boolean : is the rule on this sensor will be active and will triger) 
min |(integer , the minimum value of the sensor)  
max |(integer , the maximum value of the sensor)    
  

* Needs an API key  

### HTTP REQUEST  

`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/margin/{{sensor}}
`

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to update
sensor | the sensor name you want to update  


## Rewrite margins of a specific rule  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
{"co":{
    "active":true,
    "min":20,
    "max":50
}}
```
> ### Response  

```json
{
    "status": "success",
    "message": "rule's margins updated",
    "data": {
        "margins": {
            "co": {
                "active": true,
                "min": 20,
                "max": 50
            }
        }
    }
}
```  


Give the ability to rewrite the margins of a rule:  
be carfeul:  

* the sensor name should be present in the list showed on the *update a single rule* endpoint
* all the others sensors margins of this rule will be deleted  

  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/margins
`  

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to rewrite the margins  


## Remove webhooks from a rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "message": "All the webhooks were unlinked from the rule",
    "data": {
        "ruleId": "-bagllCEFPTBKtkiqfbJVFY"
    }
}
```  


This endpoint remove all the webhooks from a given rule  
In the rule object the webhooks ids list will be remove  
Inside each webhook that was linked to the rule , the rule Id will be remove from the array of rules  
  
* Needs an Api Key  


### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/webhooks
`  


parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to remove the webhooks  


## Delete a Specific Rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
  "status" :"success" , 
  "message" :"rule deleted" , 
  "ruleId":"-MLndsnds55sq"
}
```  


Remove ane existing rule by id 

By removing this rule you also  remove all the rule ids in the rule arrays of the webhooks that were linked to this rule  
<aside class="warning"> By removing the rule you also put all the ruleId inside the devices object that were linked to the group linked to this rule to null </aside>
  

* Need an API key  

### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}
`

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule Id you want to delete  


# Webhooks

## Get list of webhooks


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "-dJUKUAKRsgspvqWFEV": {
            "created_at": "2020-08-19T11:59:03.083Z",
            "id": "-dJUKUAKRsgspvqWFEV",
            "is_active": true,
            "last_modified": "2020-08-19T13:28:47.896Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "rules": [
                "-MDAhdwKNzOyGQOq5wN1"
            ],
            "url": "https://webhook.site/7bb3c3d2-5087-4ef6-842d-b12663e1ff41"
        },
        "-ixurjpklRJYOXNhbvlsreAATEPVI": {
            "created_at": "2020-08-19T12:19:22.378Z",
            "id": "-ixurjpklRJYOXNhbvlsreAATEPVI",
            "is_active": true,
            "last_modified": "2020-08-19T12:19:22.378Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "url": "https://google.com"
        },
        "-sxgtsPZSHfrsteagdDBSKJZ": {
            "created_at": "2020-08-19T12:47:19.429Z",
            "id": "-sxgtsPZSHfrsteagdDBSKJZ",
            "is_active": true,
            "last_modified": "2020-08-19T12:47:19.429Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "url": "https://go.com"
        },
        "-wdiphiskRDPOKQWubJCICDH": {
            "created_at": "2020-08-19T12:40:57.564Z",
            "id": "-wdiphiskRDPOKQWubJCICDH",
            "is_active": true,
            "last_modified": "2020-08-19T13:29:08.697Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "rules": [
                "-MDAhdwKNzOyGQOq5wN1"
            ],
            "url": "https://goog.com"
        }
    }
}
```  


Get the list of webhooks specific to the organization  
If you want more information on the webhook object got to the *get a specific webhook by id* endpoint

  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks
`

parameter | value
----------|------
orgId | your organization Id  


## Get a specific webhook by id


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "created_at": "2020-08-19T11:59:03.083Z",
        "id": "-dJUKUAKRsgspvqWFEV",
        "is_active": true,
        "last_modified": "2020-08-19T13:28:47.896Z",
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "rules": [
            "-MDAhdwKNzOyGQOq5wN1"
        ],
        "url": "https://webhook.site/7bb3c3d2-5087-4ef6-842d-b12663e1ff41"
    }
}
```  


Get a specific webhook by his id , only if the organization is the owner of this webhook  
Data obtained:  

key | value
----|------
created_at| (ISO string)
_id |(unique string)
is_active |(boolan , if it is to false , the webhook will not be called even if he is linked to a rule)
last_modified |(ISO string)
orgId |( string :the organizatio Id of the the organization that created this webhook)
rules |(optional : an array of rules ids the webhook is linked to , if the webhook is not linked to any rule this array does 
not exist)
url |(string: the url to call)  
  
  
 * Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | The webhook Id you want to get  


## Get list of webhooks linked to a rule  


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "empty": false,
        "list": [
            {
                "created_at": "2020-08-31T14:49:52.907Z",
                "id": "-xxtBGPYSOLIwpmdhcdlhFDMIZDG",
                "is_active": true,
                "last_modified": "2020-09-01T10:23:12.576Z",
                "orgId": "t1WspsDLvndfvptjG6JV8a28wXm1",
                "rules": [
                    "-ryakpyubrRNMSTcccogmqHFMUAZE"
                ],
                "url": "https://mywebsite.cm"
            },
            {
                "created_at": "2020-09-01T09:27:33.057Z",
                "id": "-cykvfnmHKNWgjzcRZZE",
                "is_active": true,
                "last_modified": "2020-09-01T10:28:13.889Z",
                "orgId": "t1WspsDLvndfvptjG6JV8a28wXm1",
                "rules": [
                    "-ryakpyubrRNMSTcccogmqHFMUAZE"
                ],
                "url": "https://youtube.com"
            }
        ]
    }
}
```  


Send back the list of webhooks link to a specific rule 
For more informations on the webhook object go to the *Get a specific webhook by id*  endpoint  

  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/webhooks
`

parameter | value
----------|------
orgId | your organization Id
ruleId | The ruleId you want to get the webhooks of  


## Get list of rules link to a specific webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": [
        {
            "_id": "-qnhnomDIOHHfkwlwhKARLLH",
            "created_at": "2020-09-02T08:57:28.905Z",
            "floorId": "-wxfmnKHQOZKDanlkmlijBBNYQE",
            "groupId": "-uuiquuCYOTbgfvwSHADZJ",
            "last_modified": "2020-09-02T08:57:28.905Z",
            "locationId": "-mxmrbDBDQKQWArpehxkWNTSDN",
            "margins": {
                "co": {
                    "active": true,
                    "max": 40,
                    "min": 14
                },
                "co2": {
                    "active": false
                },
                "humidity": {
                    "active": true,
                    "max": 30,
                    "min": 25
                },
                "pm10": {
                    "active": true,
                    "max": 1000,
                    "min": 900
                },
                "pm25": {
                    "active": false
                },
                "temperature": {
                    "active": false
                },
                "voc": {
                    "active": false
                }
            },
            "name": "my rule",
            "organizationId": "t1WspsDLvndfvptjG6JV8a28wXm1",
            "webhooks": [
                "-cykvfnmHKNWgjzcRZZE",
                "-xxtBGPYSOLIwpmdhcdlhFDMIZDG"
            ]
        },
        {
            "_id": "-lndslMKGAFHiisbrsSQNO",
            "created_at": "2020-09-02T08:59:25.066Z",
            "floorId": "-wxfmnKHQOZKDanlkmlijBBNYQE",
            "groupId": "-uuiquuCYOTbgfvwSHADZJ",
            "last_modified": "2020-09-02T08:59:25.066Z",
            "locationId": "-mxmrbDBDQKQWArpehxkWNTSDN",
            "margins": {
                "co": {
                    "active": true,
                    "max": 40,
                    "min": 14
                },
                "co2": {
                    "active": false
                },
                "humidity": {
                    "active": true,
                    "max": 30,
                    "min": 25
                },
                "pm10": {
                    "active": false
                },
                "pm25": {
                    "active": true,
                    "max": 1000,
                    "min": 200
                },
                "temperature": {
                    "active": false
                },
                "voc": {
                    "active": false
                }
            },
            "name": "my new rule",
            "organizationId": "t1WspsDLvndfvptjG6JV8a28wXm1",
            "webhooks": [
                "-xxtBGPYSOLIwpmdhcdlhFDMIZDG"
            ]
        }
    ]
}
```  


Send back the list of rules under a specific webhook  
For more informations on the rule object go to the *Get a specific rule by id*  endpoint    
Note that :  

* If there is no rules linked to this  webhook , the list will be empty 
* Needs an API key  

  

* Needs an API KEY  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}/rules
` 

parameter | value
----------|------
orgId | your organization Id
webhookId | The webhook Id you want to get the rules of  

## Create a Webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Body  

```json
 {
    "url":"https://mywebsite.com"
}
```
> ### Response  

```json
{
    "status": "success",
    "message": "webhook added",
    "data": {
        "url": "https://mywebsite.com",
        "created_at": "2020-08-25T09:50:07.572Z",
        "last_modified": "2020-08-25T09:50:07.572Z",
        "is_active": true,
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "id": "-yfrqksaNSBCisyeCM"
    }
}
```  


Create a webhook in the webhook object on firebase:  
The key needed is **url** and have to be a valid url
  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks
`

parameter | value
----------|------
orgId | your organization Id  


## Link a webhook to a specific rule by id


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": {
        "success": true,
        "message": "webhooks - rule link updated"
    }
}
```  


Link a webhook to a specific rue by id     
Note that it will create a webhooks array in the rule object containing all the webhooks ids this rule is linked to  
It will al so create a rule array inside the webhook object conatinig all the rule ids the webhook is linked to  
  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
ruleId | the rule you want to link to the webhook
webhookId | the webhook you want to link to the rule  


## Enable / disable a webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "state of the webhook changed"
}
```

Enable or disable a webhook by passing as state on or off    
A disabled webhook will not be called when the rules linked to it are broken  

  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}/{{state}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | the webhook you want to enable/disable
state | the updated state of a webhook , on for enable and off for disable  


## Update a webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```
> ### Body  

```json
{
  "url":"https://newurl.com"
}
```
> ### Response  

```json
{
    "status": "success",
    "message": "webhook updated",
    "data": {
        "created_at": "2020-08-19T11:59:03.083Z",
        "id": "-dJUKUAKRsgspvqWFEV",
        "is_active": false,
        "last_modified": "2020-08-25T10:25:53.057Z",
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "rules": [
            "-ktqufHOTPCbyxyuXWCMPDB"
        ],
        "url": "https://newurl.com"
    }
}
```  


Update the url of a specific webhook  
The url must be passed in the body it will be the only key accepted  
  

* Needs an APi key  


### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | the webhook you want to update  


## Unlink a webhook from a rule


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": {
        "success": true,
        "message": "webhooks - rule link updated"
    }
}
```  


Unlink a webhook from a rule.  
This rule will no longer trigger this webhook when it will be broken  
The Webhook Id will be deleted for the webhooks arrays inside the rule specified  
The rule Id given will be deleted from the webhook`s rules array specified  
  

* Needs an API key  


### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | the webhook you want to unlink from the rule
ruleId | the rule you want to unlink from the webhook  


## Delete a webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "webhook removed"
}
```  


Delete a webhook from the webhook object on firebase  
This webhook will also be deleted from all the webhooks lists in the rules he was linked too  
  

* Needs an API key  


### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/rules/{{ruleId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | the webhook you want to delete  

# Global Webhooks

<aside class="warning">This endpoints are not yet implmented </aside>

## Get list of global webhooks

> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "-dJUKUAKRsgspvqWFEV": {
            "created_at": "2020-08-19T11:59:03.083Z",
            "id": "-dJUKUAKRsgspvqWFEV",
            "is_active": true,
            "last_modified": "2020-08-19T13:28:47.896Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "url": "https://webhook.site/7bb3c3d2-5087-4ef6-842d-b12663e1ff41"
        },
        "-ixurjpklRJYOXNhbvlsreAATEPVI": {
            "created_at": "2020-08-19T12:19:22.378Z",
            "id": "-ixurjpklRJYOXNhbvlsreAATEPVI",
            "is_active": true,
            "last_modified": "2020-08-19T12:19:22.378Z",
            "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "url": "https://google.com"
        }
    }
}
```  

<aside class="warning">This endpoints are not yet implmented </aside>  

Get the list of global webhooks specific to the organization  
If you want more information on the webhook object got to the *get a specific global webhook by id* endpoint  
  

* Needs an API key  

### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/global
`

parameter | value
----------|------
orgId | your organization Id  


## Get a specific global webhook by id


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "created_at": "2020-08-19T11:59:03.083Z",
        "id": "-dJUKUAKRsgspvqWFEV",
        "is_active": true,
        "last_modified": "2020-08-19T13:28:47.896Z",
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "url": "https://webhook.site/7bb3c3d2-5087-4ef6-842d-b12663e1ff41"
    }
}
```  

<aside class="warning">This endpoints are not yet implmented </aside>  
  
Get a specific global webhook by his id , only if the organization is the owner of this global webhook  
Data obtained:   

* created_at (ISO string)
* _id (unique string)
* is_active (boolan , if it is to false , the webhook will not be called even if he is linked to a rule)
* last_modified (ISO string)
* orgId ( string :the organizatio Id of the the organization that created this webhook)
* url (string: the url to call)  
  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}/global
`

parameter | value
----------|------
orgId | your organization Id
webhookId | The webhook you want to get  


## Create a global webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```  

> ### Body  

```json
  {
      "url":"https://mywebsite.com"
  }
```  

> ### Response  

```json
{
    "status": "success",
    "message": "webhook added",
    "data": {
        "url": "https://mywebsite.com",
        "created_at": "2020-08-25T09:50:07.572Z",
        "last_modified": "2020-08-25T09:50:07.572Z",
        "is_active": true,
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "id": "-yfrqksaNSBCisyeCM"
    }
}
```  
<aside class="warning">This endpoints are not yet implmented </aside>  
  

Create a global webhook in the globalWebhooks object on firebase:  
The key needed is **url** and have to be a valid url  
A global webhook will be called at each changes of each device of your organization
  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/global
`

parameter | value
----------|------
orgId | your organization Id  


## Enable / Disable a global webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "sate of the webhook changed"
}
```  
<aside class="warning">This endpoints are not yet implmented </aside>  
  
 
Enable or disable a global webhook by passing as state on or off  
A disabled global webhook will never be called
  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}/global/{{state}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | The global webhook you want to update the state of
state |  The new sate of the webhook you want to update  


## Update a global webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```
> ### Body  

```json
  {
      "url":"https://mysuperbwebsite.com"
  }
```
> ### Response  

```json
{
    "status": "success",
    "message": "webhook updated",
    "data": {
        "created_at": "2020-08-19T11:59:03.083Z",
        "id": "-dJUKUAKRsgspvqWFEV",
        "is_active": false,
        "last_modified": "2020-08-25T10:25:53.057Z",
        "orgId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "url": "https://mysuperbwebsite.com"
    }
}
```  
<aside class="warning">This endpoints are not yet implmented </aside>  
 

Update the url of a specific global webhook  
The url must be passed in the body it will be the only key accepted  
  

Needs an APi key

### HTTP REQUEST
`
PATCH
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | The global webhook you want to update  

## Delete a global webhook


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "webhook removed"
}
```  
<aside class="warning">This endpoints are not yet implmented </aside>  


Delete a global webhook from the globalWebhooks object on firebase   
This global webhook will never be called again  
  

* Needs an API key  


### HTTP REQUEST
`
DELETE
http://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/webhooks/{{webhookId}}
`

parameter | value
----------|------
orgId | your organization Id
webhookId | The global webhook you want to delete  

# Customers

## Get a single customer by ID


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Succes",
    "data": {
        "_id": "1a7MObmW5nZG6BJ1ZHEZZn61fsz1",
        "created_at": 1594733578086,
        "email": "gilad+12@auraair.io",
        "gdpr_compliant": {
            "approved": true,
            "time_stamp": "2020-07-14T13:32:58.087Z"
        },
        "last_modified": "2020-07-14T13:34:42.963Z",
        "name": "billie eilish",
        "organizationId": "keC9HTwXplOvCc9M1RS82lxX3ax2",
        "settings": {
            "time_zone": "+0300"
        },
        "locations": {
            "-spmmbkIPRYQHFFGrzwkEZYCCIDK": {
                "_id": "-spmmbkIPRYQHFFGrzwkEZYCCIDK",
                "customer_role": "admin"
            },
            "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                "customer_role": "admin"
            },
        },
        "subscribed": false,
        "subscribed_alerts": false,
        "subscribed_maintanance": false,
        "subscribed_reports": true
    }
}
```  


Get a single customer by ID  
Data obtained :  

key | value
----|------
_id |the unique id of the customer
created_at|ISO string
last_modified | ISO string
email |string :email of the customer
gdpr_compilant |object : contain a ISO date when the user consented the gdpr_compilant
name |string name of the customer , two customers can have the same name)
organizationId| (unique string among the organization  
locations| list of locations where the user have a role , each location have 2 keys : _id for the location id and customer_role for the role
settings |string contain the time zone of the customer
subscribed |boolan , tell if the user suvbscribed to mails of the b2B service
subscribed_maintenance| boolan , tell if the user suvbscribed to mails of maintenance the b2B service
subscribed_reports| boolean , tell if the user subscribed to mails of reports of the b2B service
subscribed_alerts | boolean , tell if the user subscribed to mails of alerts of the b2B service  
  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to get  


## Get Customers by location ID


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "data": {
        "1382HQIflXUEBZGkjLdFE8uubSs1": {
            "_id": "1382HQIflXUEBZGkjLdFE8uubSs1",
            "created_at": 1598536224063,
            "email": "johndoe@gmail.com",
            "gdpr_compliant": {
                "approved": true,
                "time_stamp": "2020-08-27T13:50:24.063Z"
            },
            "last_modified": 1598536224063,
            "locations": {
                "-spmmbkIPRYQHFFGrzwkEZYCCIDK": {
                    "_id": "-spmmbkIPRYQHFFGrzwkEZYCCIDK",
                    "customer_role": "viewer"
                },
                "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                    "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                    "customer_role": "technician"
            },
            "name": "John Doe",
            "organizationId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "settings": {
                "time_zone": "+1200"
            }
        },
        "6CdBg1ctzSY8rjrWKwel7Ii9sFg2": {
            "_id": "6CdBg1ctzSY8rjrWKwel7Ii9sFg2",
            "created_at": 1602691629149,
            "email": "janedoe@gmail.com",
            "gdpr_compliant": {
                "approved": true,
                "time_stamp": "2020-10-14T16:07:09.149Z"
            },
            "last_modified": 1602691629149,
            "locations": {
                "-spmmbkIPRYQHFFGrzwkEZYCCIDK": {
                    "_id": "-spmmbkIPRYQHFFGrzwkEZYCCIDK",
                    "customer_role": "admin"
                },
                "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                    "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                    "customer_role": "admin"
                },
            },
            "name": "Jane Doe",
            "organizationId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "settings": {
                "time_zone": "+0300"
            }
        }
    }
}
```  


Get the list of all the customers that have a role under a specific location  

All the customers that have the given location Id under their location object will be returned  

For more informations about the customers object go to the *get a single customer by ID* endpoint
  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/locations/{{locationId}}
`

parameter | value
----------|------
orgId | your organization Id
locationId | the location you want to get the customers of

## Get Customers by location ID and role


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "data": {
        "1382HQIflXUEBZGkjLdFE8uubSs1": {
            "_id": "1382HQIflXUEBZGkjLdFE8uubSs1",
            "created_at": 1598536224063,
            "email": "johndoe@gmail.com",
            "gdpr_compliant": {
                "approved": true,
                "time_stamp": "2020-08-27T13:50:24.063Z"
            },
            "last_modified": 1598536224063,
            "locations": {
                "-spmmbkIPRYQHFFGrzwkEZYCCIDK": {
                    "_id": "-spmmbkIPRYQHFFGrzwkEZYCCIDK",
                    "customer_role": "viewer"
                },
                "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                    "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                    "customer_role": "technician"
            },
            "name": "John Doe",
            "organizationId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "settings": {
                "time_zone": "+1200"
            }
        },
        "6CdBg1ctzSY8rjrWKwel7Ii9sFg2": {
            "_id": "6CdBg1ctzSY8rjrWKwel7Ii9sFg2",
            "created_at": 1602691629149,
            "email": "janedoe@gmail.com",
            "gdpr_compliant": {
                "approved": true,
                "time_stamp": "2020-10-14T16:07:09.149Z"
            },
            "last_modified": 1602691629149,
            "locations": {
                "-spmmbkIPRYQHFFGrzwkEZYCCIDK": {
                    "_id": "-spmmbkIPRYQHFFGrzwkEZYCCIDK",
                    "customer_role": "viewer"
                },
                "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                    "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                    "customer_role": "admin"
                },
            },
            "name": "Jane Doe",
            "organizationId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "settings": {
                "time_zone": "+0300"
            }
        }
    }
}
```  


Get the list of all the customers that have a specific role under a specific location  

This endpoint is very similar to the *Get Customers by location id* endpoint , it only introduce a way to filter the data of this endpoint by role

All the customers that have the given location Id under their location object with the specific role  will be returned  

For more informations about the customers object go to the *get a single customer by ID* endpoint
 

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/locations/{{locationId}}/role/{{role}}
`

parameter | value
----------|------
orgId | your organization Id
locationId | the location you want to get the customers of
role | The role of the customers you want to get

## Get Customers locations list by ID


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "data": {
        "locations": {
            "-tcthvbMQGARTKVsumsagjAGBZVGP": {
                "_id": "-tcthvbMQGARTKVsumsagjAGBZVGP",
                "customer_role": "viewer"
            },
            "-fdfwwbMQGARTKVslasjfffZakl": {
                "_id": "-fdfwwbMQGARTKVslasjfffZakl",
                "customer_role": "technician"
            }
        }
    }
}
```  

Get the list of locations where the customer have a role

The data correspond to the locations object of a customer when you retrieve him

The different keys for each location are :  

key | value
----|------
_id | the location ID
customer_role | the role the customer have under this location , can be : admin , viewer or technician


 

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}/locations
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to get the list of locations


## Add location role to a customer


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "message": "customer 2slPFwveYmce2MoqbCvrSbLl4em1 updated",
    "data": {
        "customerId": "2slPFwveYmce2MoqbCvrSbLl4em1",
        "roleName": "viewer"
    }
}
```  
Let you the capability to give to a specific customer a role under a specific location  

It will add the specific location object to the list of location under  the customer object , look the *Get Customers locations list by ID* endpoint for more informations about this list

Note that the endpoint will return an error if the customer already have a role under the given location even if it is the same role as the one given  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}/locations/{{locationId}}/role/{{role}}
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to give a new role
locationId | the new location where the customer will have a role
role | the role of the customer under his new location

## Create a customer to your organization


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```  

> ### Body  

```json
  {
    "customer":{
        "email":"myemail@gmail.com", 
        "name":"John Doe",
        "time_zone":"+12"
    },
    "sendMail":true
}
```

> ### Response  

```json
{
    "status": "success",
    "message": "Customer added",
    "data": {
        "customer": {
            "_id": "iruqRa7j55gsMU1JsGU7AZd7n5y2",
            "name": "John Doe",
            "email": "myemail@gmail.com",
            "created_at": 1598517149309,
            "last_modified": 1598517149309,
            "last_login": null,
            "organizationId": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
            "customer_role": "admin",
            "gdpr_compliant": {
                "approved": true,
                "time_stamp": "2020-08-27T08:32:29.309Z"
            },
            "settings": {
                "time_zone": "+1200"
            }
        },
        "password": "feidhca"
    }
}
```  


Give the ability to create a customer for your organization :
You need to provide 3 keys :  

key | value
----|------
email |(a valid string email not already in use by another customer)
name |(a valid string name for your customer)
time_zone |( a integer between -12 and 12)  


The customer object must be send in the body under the customer key  
You can also add a key **send_mail** and put the value true to send a mail to the created customer  

In the response you will get the customer object created under the key **data.customer** (for more information on it go to the *Get a single customer by ID* endpoints)  

You will also get the password of the created user under the key **data.password**   

Note that the customer will be created without any role , if you want to add a role to it go into the *add location role to customer* endpoint  

If you decide to send mail to the customer , the login informations will be in it (email and password)  
  
When a customer is created his id is put under the viewers object of the organization  

* Needs an API key  


### HTTP REQUEST
`
POST
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers
`

parameter | value
----------|------
orgId | your organization Id  

## Update the role of a customer under a location


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "the customer was updated",
    "data": {
        "customerId": "2slPFwveYmce2MoqbCvrSbLl4em1",
        "roleName": "admin"
    }
}
```  
Let you the capability to update the role of a specific customer under a specific location  

It will update the key **customer_role** of the location in the location list under  the customer object , look the *Get Customers locations list by ID* endpoint for more informations about this list

The endpoint will return n error if the user does not have any role under the given lcation

Note that the endpoint will  also return a different message if the user already have this role under this location  

To add a role for a specific location to a customer go to the *Add a location role to a customer* endpoint  

* Needs an API key  


### HTTP REQUEST
`
PUT
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}/locations/{{locationId}}/role/{{role}}
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to update the role
locationId | the location where the customer have this role
role | the new role of the customer under the location


## Remove the role of a customer under a location


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "Success",
    "message": "The customer was updated with success",
    "data": {
        "customerId": "2slPFwveYmce2MoqbCvrSbLl4em1",
        "locationId": "-ygnrZPFGHCtslhweQMBD"
    }
}
```  
Let you the capability to remove the role of a specific customer under a specific location  

It will remove the specific location object to the list of location under  the customer object , look the *Get Customers locations list by ID* endpoint for more informations about this list

Note that the endpoint will return an error if the user does not have any role under this location
  

* Needs an API key  


### HTTP REQUEST
`
PUT
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}/locations/{{locationId}}
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to remove the location role
locationId | the location to remove 


## Delete a customer by Id


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "message": "customer deleted"
}
```  


Give you the ability to delete a customer by his Id  
Note that the customer id will also be deleted from the viewer object under the organization o  

  

* Needs an API key  


### HTTP REQUEST
`
DELETE
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}/customers/{{customerId}}
`

parameter | value
----------|------
orgId | your organization Id
customerId | the customer you want to delete  


# Organizations 

## Get a single organization by ID


> ### Headers  

```json
  {
    "Authorization": "Bearer API_KEY"
  }
```

> ### Response  

```json
{
    "status": "success",
    "data": {
        "_id": "YhGd6IE9lDcEuDgMCiS3IhL18Ym1",
        "created_at": "2020-05-14T10:22:58.431Z",
        "customer_role": "owner",
        "devices": {
            "1f002e000a47363433353735": {
                "_id": "1f002e000a47363433353735",
                "created_at": "2020-05-14T09:22:58.431Z",
                "filter_due_date": "2020-10-14T09:22:58.431Z",
                "floorId": "-M8op_BSEnPr4ccQoITD",
                "floor_name": "test1112",
                "groupId": "-M8tcVdtAlnqpHljBiVq",
                "group_name": "Group 2",
                "last_modified": "2020-06-07T12:29:54.303Z",
                "locationId": "-Lp2LeDOb8SdpqYU1Wpw12",
                "location_name": "Building 2",
                "room": "Living Room"
            },
            "25002e001147383531363134": {
                "_id": "25002e001147383531363134",
                "created_at": "2020-05-14T09:22:58.431Z",
                "filter_due_date": "2020-10-14T09:22:58.431Z",
                "floorId": "-M8opVbcMkKAXZGCJt2l",
                "floor_name": "test1112",
                "groupId": "ooxyyZz1",
                "group_name": "Group 2",
                "last_modified": "2020-06-04T10:42:53.289Z",
                "locationId": "-Lp2LeDOb8SdpqYU1Wpw",
                "location_name": "Building 1",
                "room": "Conference Room roei"
            }
            },
        "email": "jbronaldo131@gmail.com",
        "floors": {
            "-M8tVY8qZaSrXtrUzG80": {
                "_id": "-M8tVY8qZaSrXtrUzG80",
                "created_at": "2020-06-03T09:27:55.319Z",
                "last_modified": "2020-06-03T09:27:55.319Z",
                "locationId": "-M7qh60FjNWsDVfEuD6Z",
                "name": "floor ne",
                "reminderDay": "1"
            },
            "-MAQ4XeE2mdDkDmq2bva": {
                "_id": "-MAQ4XeE2mdDkDmq2bva",
                "created_at": "2020-06-22T08:12:42.549Z",
                "last_modified": "2020-06-22T08:12:42.549Z",
                "locationId": "-M7qh60FjNWsDVfEuD6Z",
                "name": "floor 2",
                "reminderDay": "1"
            },
        },
        "groups": {
            "-M8tcHwxWOGJtVAZI14G": {
                "_id": "-M8tcHwxWOGJtVAZI14G",
                "created_at": "2020-06-03T10:01:46.121Z",
                "last_modified": "2020-06-03T10:01:46.121Z",
                "locationId": "-Lp2LeDOb8SdpqYU1Wpw13",
                "name": "test32"
            },
            "-M8tcVdtAlnqpHljBiVq": {
                "_id": "-M8tcVdtAlnqpHljBiVq",
                "created_at": "2020-06-03T10:02:42.246Z",
                "last_modified": "2020-06-03T10:02:51.571Z",
                "locationId": "-Lp2LeDOb8SdpqYU1Wpw12",
                "name": "build123"
            },
            "-duueAXXsohvcsdLKNHHXOM": {
                "_id": "-duueAXXsohvcsdLKNHHXOM",
                "locationId": "-M7qh60FjNWsDVfEuD6Z",
                "name": "group shel hagvarim"
            },
            "-fgruxpFWQCjeikmfUERJG": {
                "_id": "-fgruxpFWQCjeikmfUERJG",
                "locationId": "-M7qh60FjNWsDVfEuD6Z",
                "name": "group shel hagvarim"
            }
        },
        "last_login": "2020-05-14T09:22:58.431Z",
        "last_modified": "2020-05-14T09:22:58.431Z",
        "locations": {
            "-Lp2LeDOb8SdpqYU1Wpw12": {
                "_id": "-Lp2LeDOb8SdpqYU1Wpw12",
                "address": "Hamiphras 6",
                "altitude": 0,
                "aura_daily_report": "true",
                "bad_aqi_event": false,
                "city": "Yavne",
                "components": {
                    "administrative_area": "Merkaz",
                    "country_iso_3": "ISR",
                    "locality": "Yavne",
                    "postal_code": "81000",
                    "postal_code_short": "81000",
                    "premise": "6",
                    "premise_number": "6",
                    "sub_administrative_area": "Rehovot",
                    "thoroughfare": "Hamifras",
                    "thoroughfare_name": "Hamiphras"
                },
                "created_at": 1577098253453,
                "last_modified": 1577098253453,
                "latitude": 31.86777,
                "longitude": 34.733457,
                "name": "Building 2",
                "state": "Israel",
                "zipcode": "8101306"
            },
            "-M7qh60FjNWsDVfEuD6Z": {
                "_id": "-M7qh60FjNWsDVfEuD6Z",
                "address": "Saknai 4",
                "aura_daily_report": true,
                "city": "hod hasharon",
                "components": {
                    "ISO_3166-1_alpha-2": "US",
                    "ISO_3166-1_alpha-3": "USA",
                    "_category": "place",
                    "_type": "village",
                    "continent": "North America",
                    "country": "United States of America",
                    "country_code": "us",
                    "country_iso_3": "USA",
                    "county": "Maricopa County",
                    "hamlet": "Kaka",
                    "state": "Arizona",
                    "state_code": "AZ"
                },
                "created_at": 1590055694668,
                "is_shared": false,
                "last_modified": "2020-07-09T09:00:13.914Z",
                "latitude": 32.1420858,
                "longitude": 34.8918504,
                "name": "Aura Office",
                "state": "israel",
                "zipcode": "453535"
            },
        },
        "logo_url": "https://firebasestorage.googleapis.com/v0/b/aura-b2b.appspot.com/o/auralogo.png?alt=media&token=a5039565-d626-415c-99ac-616136b2ddb1",
        "name": "Aura Business",
        "rules": {
            "-MBiq1XyBRNfdfassw9g": "e1x0wflkfkflkfffifjffefyMxg2",
            "-MDAKu4GMnlnDQ8ohAO8": "whvuygfigrnbifhjpjyjikpewxl1"
        },
        "temperature_unit": "C",
        "api":{
          "use_count": 234,
        },
        "viewers": {
            "-MBiq1XyBRNfdjtO1d9g": "e1x0LZdTemRqyW0mz0S3FctyMxg2",
            "-MDAKu4GMnlnDQ8ohAO8": "whJ6LU6AAobTBmXKNu1k0ABZAxl1"
        }
    }
}
```  
  

Give your organizations informations 
The organization object will get the following keys :  

key | value
----|------
id| a string , the id of the organization
viewers| an object , the list of all the customers Ids of the organization
devices| an object ,  the list of devices of the organization
locations| an object ,  the list of locations of the organization
floors| an object ,  the list of floors of the organization
groups| an object ,  the list of groups of the organization
last_modified| an ISO date , the last time , the last time the organization object was modified
rules | an object , the list of rules Id of the organization,
logo_url | a string , the url of the pictures of your logo
name | a string , the name of the organization  
  

* Needs an API key  


### HTTP REQUEST
`
GET
https://aura-b2b-rest.web.app/api/v1/org/{{orgId}}
`  

parameter | value
----------|------
orgId | your organization Id  

